# Setting up a Customized Page

This guide describes indepth how you can create a page with your own
template and styles. It also goes in detail through the different content types.

Have fun!

## The `page` folder

As already described, the **Page** folder contains everything you need to render a page using the Simpla Docker container.

This everything is: 

1. configurations
2. views (aka templates)
3. and the content (which is being discussed in the [Content Guide](/documentation/03.creating-content.md))

The Page folder and a target folder (call `dist`) are being mounted into the container using the Docker `run` command and that is all you need to generate a static version of your website.

### Configurations

All configurations can be found under `config/config.php`. It's a simple array structure that gets passed
down to every template. 

As you might have noticed, this is just a simple PHP array and nothing can stop you from extending it. Everything you add will be available in your templates under `$config->name_of_your_key`.

The config file consists of one section which defines options about the Page itself and one that deals with paths and basic technical settings.

The Getting Started Guide already contains a detailed overview of the [Page specific configuration options](/documentation/01.getting-started.md#12-configurations). These control aspects like the title, description, language etc.

The paths and basic settings actually don't need tweaking, but in order to keep it simple, all config options are here and there is no other place for configurations!

Here you'll find:

- `folders`
    - `assets`: This is where static assets (css, js etc) of the theme are being stored.
    - `dist`: Target folder for generated files.
    - `dist_tags`: Target folder for generated tags files.
    - `content_images`: This is where the engine expects images in content.
    - `dist_content_images`: This is where content images are being copied to.
    - `views`: This is where the engine expects to find themes.
    - `content`: This is where the engine expects to find the content.

- `views`: An array that defines the names of templates files. It's pretty useless, but you could store them under different names as well.

- `content`: A list of available content types.

- `file_extension_content`: the file extension of generated content files (usually `html`).

- `file_extension_feed`: The file extension of generated feeds (usually `xml`).


### Views

Views are the templates used to render the (markdown) content into static files. Simpla uses nothing but plain PHP files with the `.phtml` extension (in order t distinguish them from classes and other code files) and `include` statements to orchestrate them.

That means you can basically run havoc and put any type of code into any template file, nothing will stop you! ‚Äì Except from your inner code guru, who whispers things about separation of concerns and that mixing business logic and presentational logic is the root of all evil, right?

#### Themes

A Theme is a very fancy name for a sub folder inside the Views folder. But it does the trick! üòÅ

The name of the Theme folder has to be specified in the `theme` option in the [configuration file](/documentation/01.getting-started.md#12-configurations) and that's it.

The main motivation for adding this feature was the capability to copying the `default` Theme, rename it and start adjusting it for a new website.

Whether or not a seamless switch between Themes is actually possible without adjusting the Content or other things ‚Äì is something you can go and find out, if you feel the need to.

#### Layout Templates

Each page type requires a template file. They are defined in the `views` section of the [configuration file](/documentation/01.getting-started.md#12-configurations).

In order to keep things tidy and DRY, the template of a page type consists of nothing but `include` statements, but that's actually not required. You can put everything into this file and be good.

But I would honestly recommend to invest the extra bytes and keep the Layout file minimal like this:

```
<!DOCTYPE html>
<html lang="<?= $config->language ?>">

<head>
  <?php include __DIR__ . '/partials/head-index.phtml' ?>
</head>

<body>
  <?php include __DIR__ . '/partials/header.phtml' ?>

  <?php
    foreach ($entities as $entity) :
      include __DIR__ . '/partials/article.phtml';
    endforeach;
  ?>

  <?php include __DIR__ . '/partials/footer.phtml' ?>

</body>

</html>
```

Two things are worth mentioning here:

1. The configuration is always available in a variable called `$config`.
2. Collection templates (i.e. Tags and Post indexes) like this one have all related content available in `$entities` (to iterate over it), while single content templates (i.e. a Post, a Page) only have an `$entity`.


#### Partial Templates

Partial templates are PHP files which are included into other templates.

Convention says they need to be stored under `views/[THEME]/partials/[PARTIAL].phtml` (but what do I know).

It's a good idea to extract elements that might be used in multiple Layout templates into a partial. That can be the header or the footer, but it might also be the template for an article.

I also find partials useful to unclutter templates and reduce visual complexity by outsourcing things.

Since partials are added through the `include` statement, all variables of the parent template are automatically available. That means you can access the `$config` and the `$entities` or `$entity` variable at any time.

But be careful: since there is no dependency management, it's quite easy to rely on a certain variable, only to find out that in a certain context it might not be available!

#### Menus

Menus in Simpla are not beautiful and they will hopefully change at one point. But for now they are the way they are.

And that means, menus are being defined in the [configuration file](/documentation/01.getting-started.md#12-configurations) and rendered using the corresponding templates, which are defined in the `views => menus` section and reside inside `views/[THEME]/menus`. 

The name of the template file must correspond with the key used in the config file. That means if your menu section looks like this:

```
  "menus" => [ `page/views/menus/[KEY_OF_THE_ENTRY_AS_FILENAME].phtml`.
    "main" => [...],
    "social" => [...],
    "footer" => [...]
  ],
```

You need to have three menu templates (`main.phtml`, `social.phtml`, `footer.phtml`) inside the menus folder.

A menu usually looks something like this:

```
<ul>
  <?php foreach ($menuItems as $menuItem) : ?>

  <li><p><?=$buildMenuLink($menuItem) ?></p></li>

  <?php endforeach; ?>
</ul>
```

The template receives all items inside a collection called `$menuItems` and it receives a Closure called `$buildMenuLink` that knows everything it needs in order to build reliable context specific link.

On top of it you also have the `$config` available of course!

#### Assets

All static assets needed by the theme, are stored inside `views/[THEME]/assets`.

It's helpful to organise the assets directory using context specific subfolders like `css`, `js` etc, but don't worry, everything inside this folder is copied over into the `dist` folder at generation time.

##### Important to Know:

1. All content and subfolders of the assets directory are **copied into the root directory** of the output folder! That means `views/[THEME]/assets/css/main.css` becomes `dist/css/main.css`.
2. There is absolutely **no processing of stylesheets, scripts or images** happening. And that is sad. But this is a content generator and not a JavaScript build tool ‚Äì and as much as some those features might come in handy, the costs in terms of dependencies and complexity are definitely beyond what would be acceptable for a tool like Simpla.

## Tips & Tricks

### Using a Static Page as the Startpage

Simpla allows you to use a collection of the latest posts as the startpage or to define a static page forn this.

The collection of latest posts is the default, so in this section you'll learn how to use a static page in three steps.

#### Create a Layout Template

I'm assuming that you want your startpage to look different than your regular content pages, so please go into `views/[THEME]` and add a new Layout templates called `startpage.phtml`. Simply copy the `page.phtml` and apply any change you want.

#### Create a Page

Create a new Page called `index.md` inside the `page/content/pages` folder.

Additionally to the normal page keys, it needs to have the following meta keys in the header:

```
title: 'Homepage' // Choose whatever name you want, but Homeage makes it clearer
slug: 'index' // This is actually important, because it makes sure that this page is rendered as index.html(!)
template: 'startpage.phtml' // This should reference the Layout template you just created.
```

Everything else works just like a regular Page. Simply add your content as Markdown and run the generator.

#### Give the `post_index` a New Name

But before actually running the generator, please take another second and go to the [configuration file](/documentation/01.getting-started.md#12-configurations) and change the value of `slugs => post_index` to something that is not `index` (you might want to use `blog`)!

That's it.

The demo Page is using exactly this setup, so please feel free to look it up in the config file...

### Landingpages with Sections

This is a new feature, which about to be released.
